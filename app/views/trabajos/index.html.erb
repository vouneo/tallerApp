<div class="max-w-6xl mx-auto p-4 space-y-6">
  <!-- üîç Buscador -->
  <div class="flex justify-between items-center">
    <h1 class="text-3xl font-bold">Trabajos</h1>
    <%= link_to "+ Nuevo Trabajo", new_trabajo_path, class: "btn btn-primary" %>
  </div>

  <div class="form-control">
    <form method="get" action="<%= trabajos_path %>" class="flex gap-2">
      <input type="text" name="query" value="<%= params[:query] %>" placeholder="Buscar por N¬∞ de trabajo, cliente o tipo‚Ä¶" class="input input-bordered w-full max-w-md" />
      <button type="submit" class="btn btn-neutral">Buscar</button>
    </form>
  </div>

  <!-- üì¶ Lista de Clientes con sus trabajos -->
  <% @clientes_con_trabajos.each do |cliente| %>
    <div class="card bg-base-100 shadow-md border border-base-200">
      <div class="card-body">
        <h2 class="card-title text-xl"><%= cliente.nombre %></h2>

        <div class="overflow-x-auto rounded-box mt-4">
          <table class="table table-zebra w-full">
            <thead>
              <tr>
                <th>ID</th>
                <th>Tipo</th>
                <th>Caracter√≠sticas</th>
                <th>Valor</th>
                <th>Pagado</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              <% cliente.trabajos.each do |trabajo| %>
                <tr>
                  <td><%= trabajo.id %></td>
                  <td><%= trabajo.tipo %></td>
                  <td><%= trabajo.caracteristicas %></td>
                  <td>$<%= number_with_delimiter(trabajo.valor) %></td>
                  <td><%= trabajo.pagado %></td>
                  <td class="flex gap-2">
                    <%= link_to "‚úèÔ∏è", edit_trabajo_path(trabajo), class: "btn btn-sm btn-outline" %>
                    <%= link_to "üóëÔ∏è", trabajo_path(trabajo), method: :delete, data: { confirm: "¬øEst√°s seguro?" }, class: "btn btn-sm btn-error btn-outline" %>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  <% end %>

  <% if @clientes_con_trabajos.empty? %>
    <div class="alert alert-info mt-6">
      No se encontraron trabajos para mostrar.
    </div>
  <% end %>
</div>
